{"ast":null,"code":"// client/src/employee/components/MyBookings.js\nimport React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyBookings=()=>{const[bookings,setBookings]=useState([]);const[loading,setLoading]=useState(true);const[message,setMessage]=useState('');const token=localStorage.getItem('token');const userId=localStorage.getItem('userId');useEffect(()=>{fetchBookings();// eslint-disable-next-line\n},[userId,token]);const fetchBookings=async()=>{try{const response=await axios.get(\"http://localhost:5000/api/bookings/user/\".concat(userId),{headers:{Authorization:\"Bearer \".concat(token)}});setBookings(response.data);}catch(error){console.error(\"Error fetching bookings\",error);}finally{setLoading(false);}};const handleCancel=async(bookingId,startTime)=>{const now=new Date();const start=new Date(startTime);const diff=(start-now)/(1000*60*60);// in hours\nif(diff<=1){setMessage('You can only cancel bookings more than 1 hour before start time.');return;}if(!window.confirm('Are you sure you want to cancel this booking?'))return;try{await axios.delete(\"http://localhost:5000/api/bookings/\".concat(bookingId),{headers:{Authorization:\"Bearer \".concat(token)}});setMessage('Booking cancelled.');fetchBookings();}catch(err){var _err$response,_err$response$data;setMessage(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to cancel booking');}};return/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'100vh',background:'linear-gradient(120deg, #f8fafc 60%, #e3e9f7 100%)',padding:'0',margin:'0'},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'900px',margin:'40px auto',background:'#fff',borderRadius:'18px',boxShadow:'0 4px 24px rgba(30,64,175,0.10)',padding:'40px 48px',minHeight:'calc(100vh - 120px)',boxSizing:'border-box'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{marginBottom:'28px',fontSize:'2.2rem',display:'flex',alignItems:'center',gap:'10px',color:'#1976d2',fontWeight:700},children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"bookings\",children:\"\\uD83D\\uDCCB\"}),\" My Bookings\"]}),message&&/*#__PURE__*/_jsx(\"p\",{style:{color:message.includes('cancel')?'#388e3c':'#d32f2f',fontWeight:500,marginBottom:'18px'},children:message}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):bookings.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontSize:'1.1rem',textAlign:'center'},children:\"No bookings found.\"}):/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto',borderRadius:'12px',boxShadow:'0 2px 12px rgba(30,64,175,0.08)',background:'#f8fafc'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',background:'#fff',borderRadius:'12px',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:'#f2f2f2'},children:[/*#__PURE__*/_jsx(\"th\",{style:cellHeader,children:\"Room\"}),/*#__PURE__*/_jsx(\"th\",{style:cellHeader,children:\"Start\"}),/*#__PURE__*/_jsx(\"th\",{style:cellHeader,children:\"End\"}),/*#__PURE__*/_jsx(\"th\",{style:cellHeader,children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bookings.map(booking=>{var _booking$room;return/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #e3e7ee'},children:[/*#__PURE__*/_jsx(\"td\",{style:cell,children:(_booking$room=booking.room)===null||_booking$room===void 0?void 0:_booking$room.name}),/*#__PURE__*/_jsx(\"td\",{style:cell,children:new Date(booking.startTime).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{style:cell,children:new Date(booking.endTime).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{style:cell,children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancel(booking._id,booking.startTime),style:{padding:'7px 18px',background:'#d32f2f',color:'#fff',border:'none',borderRadius:'5px',fontWeight:600,cursor:'pointer',transition:'background 0.2s, transform 0.1s'},onMouseOver:e=>e.target.style.background='#b71c1c',onMouseOut:e=>e.target.style.background='#d32f2f',children:\"Cancel\"})})]},booking._id);})})]})})]})});};const cellHeader={border:'1px solid #e3e7ee',padding:'16px',textAlign:'center',fontSize:'1.08rem',fontWeight:700,color:'#1a237e',background:'#f5f5f5'};const cell={border:'1px solid #e3e7ee',padding:'14px',textAlign:'center',fontSize:'1rem',background:'#fff'};export default MyBookings;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","MyBookings","bookings","setBookings","loading","setLoading","message","setMessage","token","localStorage","getItem","userId","fetchBookings","response","get","concat","headers","Authorization","data","error","console","handleCancel","bookingId","startTime","now","Date","start","diff","window","confirm","delete","err","_err$response","_err$response$data","style","minHeight","background","padding","margin","children","maxWidth","borderRadius","boxShadow","boxSizing","marginBottom","fontSize","display","alignItems","gap","color","fontWeight","role","includes","length","textAlign","overflowX","width","borderCollapse","overflow","backgroundColor","cellHeader","map","booking","_booking$room","borderBottom","cell","room","name","toLocaleString","endTime","onClick","_id","border","cursor","transition","onMouseOver","e","target","onMouseOut"],"sources":["C:/Users/ADMIN/Desktop/hyd/hyd/frontend/src/employee/components/MyBookings.js"],"sourcesContent":["// client/src/employee/components/MyBookings.js\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst MyBookings = () => {\r\n  const [bookings, setBookings] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n  const token = localStorage.getItem('token');\r\n  const userId = localStorage.getItem('userId');\r\n\r\n  useEffect(() => {\r\n    fetchBookings();\r\n    // eslint-disable-next-line\r\n  }, [userId, token]);\r\n\r\n  const fetchBookings = async () => {\r\n    try {\r\n      const response = await axios.get(`http://localhost:5000/api/bookings/user/${userId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setBookings(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching bookings\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = async (bookingId, startTime) => {\r\n    const now = new Date();\r\n    const start = new Date(startTime);\r\n    const diff = (start - now) / (1000 * 60 * 60); // in hours\r\n    if (diff <= 1) {\r\n      setMessage('You can only cancel bookings more than 1 hour before start time.');\r\n      return;\r\n    }\r\n    if (!window.confirm('Are you sure you want to cancel this booking?')) return;\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/bookings/${bookingId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setMessage('Booking cancelled.');\r\n      fetchBookings();\r\n    } catch (err) {\r\n      setMessage(err.response?.data?.message || 'Failed to cancel booking');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      minHeight: '100vh',\r\n      background: 'linear-gradient(120deg, #f8fafc 60%, #e3e9f7 100%)',\r\n      padding: '0',\r\n      margin: '0'\r\n    }}>\r\n      <div style={{\r\n        maxWidth: '900px',\r\n        margin: '40px auto',\r\n        background: '#fff',\r\n        borderRadius: '18px',\r\n        boxShadow: '0 4px 24px rgba(30,64,175,0.10)',\r\n        padding: '40px 48px',\r\n        minHeight: 'calc(100vh - 120px)',\r\n        boxSizing: 'border-box'\r\n      }}>\r\n        <h2 style={{\r\n          marginBottom: '28px',\r\n          fontSize: '2.2rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '10px',\r\n          color: '#1976d2',\r\n          fontWeight: 700\r\n        }}>\r\n          <span role=\"img\" aria-label=\"bookings\">ðŸ“‹</span> My Bookings\r\n        </h2>\r\n        {message && (\r\n          <p style={{\r\n            color: message.includes('cancel') ? '#388e3c' : '#d32f2f',\r\n            fontWeight: 500,\r\n            marginBottom: '18px'\r\n          }}>{message}</p>\r\n        )}\r\n        {loading ? (\r\n          <p>Loading...</p>\r\n        ) : bookings.length === 0 ? (\r\n          <p style={{ color: '#888', fontSize: '1.1rem', textAlign: 'center' }}>No bookings found.</p>\r\n        ) : (\r\n          <div style={{\r\n            overflowX: 'auto',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 12px rgba(30,64,175,0.08)',\r\n            background: '#f8fafc'\r\n          }}>\r\n            <table style={{\r\n              width: '100%',\r\n              borderCollapse: 'collapse',\r\n              background: '#fff',\r\n              borderRadius: '12px',\r\n              overflow: 'hidden'\r\n            }}>\r\n              <thead>\r\n                <tr style={{ backgroundColor: '#f2f2f2' }}>\r\n                  <th style={cellHeader}>Room</th>\r\n                  <th style={cellHeader}>Start</th>\r\n                  <th style={cellHeader}>End</th>\r\n                  <th style={cellHeader}>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {bookings.map((booking) => (\r\n                  <tr key={booking._id} style={{ borderBottom: '1px solid #e3e7ee' }}>\r\n                    <td style={cell}>{booking.room?.name}</td>\r\n                    <td style={cell}>{new Date(booking.startTime).toLocaleString()}</td>\r\n                    <td style={cell}>{new Date(booking.endTime).toLocaleString()}</td>\r\n                    <td style={cell}>\r\n                      <button\r\n                        onClick={() => handleCancel(booking._id, booking.startTime)}\r\n                        style={{\r\n                          padding: '7px 18px',\r\n                          background: '#d32f2f',\r\n                          color: '#fff',\r\n                          border: 'none',\r\n                          borderRadius: '5px',\r\n                          fontWeight: 600,\r\n                          cursor: 'pointer',\r\n                          transition: 'background 0.2s, transform 0.1s'\r\n                        }}\r\n                        onMouseOver={e => (e.target.style.background = '#b71c1c')}\r\n                        onMouseOut={e => (e.target.style.background = '#d32f2f')}\r\n                      >\r\n                        Cancel\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst cellHeader = {\r\n  border: '1px solid #e3e7ee',\r\n  padding: '16px',\r\n  textAlign: 'center',\r\n  fontSize: '1.08rem',\r\n  fontWeight: 700,\r\n  color: '#1a237e',\r\n  background: '#f5f5f5'\r\n};\r\n\r\nconst cell = {\r\n  border: '1px solid #e3e7ee',\r\n  padding: '14px',\r\n  textAlign: 'center',\r\n  fontSize: '1rem',\r\n  background: '#fff'\r\n};\r\n\r\nexport default MyBookings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}