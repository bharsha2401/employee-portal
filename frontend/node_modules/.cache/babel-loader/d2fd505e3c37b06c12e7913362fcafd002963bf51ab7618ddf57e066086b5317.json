{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import SuperAdminSidebar from'../superadmin/components/Sidebar';import AdminSidebar from'../admin/components/Sidebar';import EmployeeSidebar from'../employee/components/Sidebar';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChangePassword=()=>{const[oldPassword,setOldPassword]=useState('');const[newPassword,setNewPassword]=useState('');const role=localStorage.getItem('role');// Choose sidebar based on role\nlet Sidebar=null;if(role==='SuperAdmin')Sidebar=SuperAdminSidebar;else if(role==='Admin')Sidebar=AdminSidebar;else if(role==='Employee')Sidebar=EmployeeSidebar;const handleChangePassword=async e=>{e.preventDefault();const token=localStorage.getItem('token');if(!token){toast.error('You must be logged in to change your password.');return;}try{const res=await axios.post('http://localhost:5000/api/auth/change-password',{oldPassword,newPassword},{headers:{Authorization:\"Bearer \".concat(token)}});toast.success(res.data.message||'Password changed successfully');setOldPassword('');setNewPassword('');}catch(error){if(error.response&&error.response.status===401){toast.error('Session expired or unauthorized. Please log in again.');}else{var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Something went wrong');}}};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',minHeight:'100vh',background:'#f7fafd'},children:[Sidebar&&/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'500px',width:'100%',background:'#fff',padding:'36px 32px 28px 32px',borderRadius:'16px',boxShadow:'0 8px 32px rgba(0,0,0,0.10)',margin:'32px 0'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{textAlign:'center',marginBottom:'28px',color:'#222',fontWeight:700,letterSpacing:'1px',fontSize:'2rem',display:'flex',alignItems:'center',justifyContent:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"lock\",children:\"\\uD83D\\uDD12\"}),\" Change Password\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleChangePassword,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"oldPassword\",style:{fontWeight:'bold',color:'#222',marginBottom:'6px',display:'block',fontSize:'1.08rem'},children:\"Old Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"oldPassword\",type:\"password\",placeholder:\"Old Password\",value:oldPassword,onChange:e=>setOldPassword(e.target.value),required:true,style:{width:'100%',padding:'12px',marginBottom:'18px',borderRadius:'6px',border:'1px solid #d1d5db',fontSize:'16px',background:'#f8fafc',boxSizing:'border-box',transition:'border 0.2s'}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newPassword\",style:{fontWeight:'bold',color:'#222',marginBottom:'6px',display:'block',fontSize:'1.08rem'},children:\"New Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"newPassword\",type:\"password\",placeholder:\"New Password\",value:newPassword,onChange:e=>setNewPassword(e.target.value),required:true,style:{width:'100%',padding:'12px',marginBottom:'18px',borderRadius:'6px',border:'1px solid #d1d5db',fontSize:'16px',background:'#f8fafc',boxSizing:'border-box',transition:'border 0.2s'}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:'100%',padding:'12px',background:'linear-gradient(90deg, #007bff 60%, #0056b3 100%)',color:'white',border:'none',borderRadius:'6px',fontSize:'17px',fontWeight:600,marginTop:'10px',cursor:'pointer',transition:'background 0.2s'},children:\"Change Password\"})]})]})})]});};export default ChangePassword;","map":{"version":3,"names":["React","useState","axios","SuperAdminSidebar","AdminSidebar","EmployeeSidebar","toast","jsx","_jsx","jsxs","_jsxs","ChangePassword","oldPassword","setOldPassword","newPassword","setNewPassword","role","localStorage","getItem","Sidebar","handleChangePassword","e","preventDefault","token","error","res","post","headers","Authorization","concat","success","data","message","response","status","_error$response","_error$response$data","style","display","minHeight","background","children","flex","alignItems","justifyContent","maxWidth","width","padding","borderRadius","boxShadow","margin","textAlign","marginBottom","color","fontWeight","letterSpacing","fontSize","gap","onSubmit","htmlFor","id","type","placeholder","value","onChange","target","required","border","boxSizing","transition","marginTop","cursor"],"sources":["C:/Users/ADMIN/Desktop/hyd/hyd/frontend/src/pages/ChangePassword.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport SuperAdminSidebar from '../superadmin/components/Sidebar';\r\nimport AdminSidebar from '../admin/components/Sidebar';\r\nimport EmployeeSidebar from '../employee/components/Sidebar';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst ChangePassword = () => {\r\n  const [oldPassword, setOldPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const role = localStorage.getItem('role');\r\n\r\n  // Choose sidebar based on role\r\n  let Sidebar = null;\r\n  if (role === 'SuperAdmin') Sidebar = SuperAdminSidebar;\r\n  else if (role === 'Admin') Sidebar = AdminSidebar;\r\n  else if (role === 'Employee') Sidebar = EmployeeSidebar;\r\n\r\n  const handleChangePassword = async (e) => {\r\n    e.preventDefault();\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      toast.error('You must be logged in to change your password.');\r\n      return;\r\n    }\r\n    try {\r\n      const res = await axios.post(\r\n        'http://localhost:5000/api/auth/change-password',\r\n        { oldPassword, newPassword },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      toast.success(res.data.message || 'Password changed successfully');\r\n      setOldPassword('');\r\n      setNewPassword('');\r\n    } catch (error) {\r\n      if (error.response && error.response.status === 401) {\r\n        toast.error('Session expired or unauthorized. Please log in again.');\r\n      } else {\r\n        toast.error(error.response?.data?.message || 'Something went wrong');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: 'flex', minHeight: '100vh', background: '#f7fafd' }}>\r\n      {Sidebar && <Sidebar />}\r\n      <div style={{\r\n        flex: 1,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n      }}>\r\n        <div\r\n          style={{\r\n            maxWidth: '500px',\r\n            width: '100%',\r\n            background: '#fff',\r\n            padding: '36px 32px 28px 32px',\r\n            borderRadius: '16px',\r\n            boxShadow: '0 8px 32px rgba(0,0,0,0.10)',\r\n            margin: '32px 0',\r\n          }}\r\n        >\r\n          <h2\r\n            style={{\r\n              textAlign: 'center',\r\n              marginBottom: '28px',\r\n              color: '#222',\r\n              fontWeight: 700,\r\n              letterSpacing: '1px',\r\n              fontSize: '2rem',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '8px',\r\n            }}\r\n          >\r\n            <span role=\"img\" aria-label=\"lock\">ðŸ”’</span> Change Password\r\n          </h2>\r\n          <form onSubmit={handleChangePassword}>\r\n            <label\r\n              htmlFor=\"oldPassword\"\r\n              style={{\r\n                fontWeight: 'bold',\r\n                color: '#222',\r\n                marginBottom: '6px',\r\n                display: 'block',\r\n                fontSize: '1.08rem',\r\n              }}\r\n            >\r\n              Old Password:\r\n            </label>\r\n            <input\r\n              id=\"oldPassword\"\r\n              type=\"password\"\r\n              placeholder=\"Old Password\"\r\n              value={oldPassword}\r\n              onChange={(e) => setOldPassword(e.target.value)}\r\n              required\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                marginBottom: '18px',\r\n                borderRadius: '6px',\r\n                border: '1px solid #d1d5db',\r\n                fontSize: '16px',\r\n                background: '#f8fafc',\r\n                boxSizing: 'border-box',\r\n                transition: 'border 0.2s',\r\n              }}\r\n            />\r\n            <label\r\n              htmlFor=\"newPassword\"\r\n              style={{\r\n                fontWeight: 'bold',\r\n                color: '#222',\r\n                marginBottom: '6px',\r\n                display: 'block',\r\n                fontSize: '1.08rem',\r\n              }}\r\n            >\r\n              New Password:\r\n            </label>\r\n            <input\r\n              id=\"newPassword\"\r\n              type=\"password\"\r\n              placeholder=\"New Password\"\r\n              value={newPassword}\r\n              onChange={(e) => setNewPassword(e.target.value)}\r\n              required\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                marginBottom: '18px',\r\n                borderRadius: '6px',\r\n                border: '1px solid #d1d5db',\r\n                fontSize: '16px',\r\n                background: '#f8fafc',\r\n                boxSizing: 'border-box',\r\n                transition: 'border 0.2s',\r\n              }}\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                background: 'linear-gradient(90deg, #007bff 60%, #0056b3 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontSize: '17px',\r\n                fontWeight: 600,\r\n                marginTop: '10px',\r\n                cursor: 'pointer',\r\n                transition: 'background 0.2s',\r\n              }}\r\n            >\r\n              Change Password\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangePassword;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}