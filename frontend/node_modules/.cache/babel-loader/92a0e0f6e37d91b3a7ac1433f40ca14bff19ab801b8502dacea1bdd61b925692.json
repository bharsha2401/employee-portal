{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ViewAllBookings=()=>{const[bookings,setBookings]=useState([]);const token=localStorage.getItem('token');useEffect(()=>{fetchBookings();// eslint-disable-next-line\n},[token]);const fetchBookings=async()=>{try{const res=await axios.get('http://localhost:5000/api/bookings',{headers:{Authorization:\"Bearer \".concat(token)}});setBookings(res.data);}catch(err){console.error('Error loading bookings:',err);}};const handleCancel=async bookingId=>{if(!window.confirm('Are you sure you want to cancel this booking?'))return;try{await axios.delete(\"http://localhost:5000/api/bookings/\".concat(bookingId),{headers:{Authorization:\"Bearer \".concat(token)}});fetchBookings();}catch(err){var _err$response,_err$response$data;alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to cancel booking');}};const formatDateTime=dateStr=>{const d=new Date(dateStr);return d.toLocaleDateString('en-GB')+', '+d.toLocaleTimeString('en-GB',{hour:'2-digit',minute:'2-digit',second:'2-digit'});};// consistent with ManageRooms\nconst contentContainerStyle={padding:'40px',maxWidth:'1200px',margin:'40px auto',background:'#f7f8fa',minHeight:'100vh',boxSizing:'border-box'};const tableContainerStyle={background:'#fff',borderRadius:'18px',boxShadow:'0 4px 24px rgba(0,0,0,0.10)',padding:'0',marginTop:'30px',minHeight:'unset',boxSizing:'border-box',border:'1px solid #e3e7ee',overflowX:'auto',scrollbarWidth:'medium'// Firefox\n};return/*#__PURE__*/_jsxs(\"div\",{style:contentContainerStyle,children:[/*#__PURE__*/_jsxs(\"h2\",{style:{marginBottom:'25px',fontSize:'2.2rem',display:'flex',alignItems:'center',gap:'10px',color:'#1976d2',fontWeight:700},children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"bookings\",children:\"\\uD83D\\uDDD2\\uFE0F\"}),\" All Bookings\"]}),/*#__PURE__*/_jsxs(\"div\",{style:tableContainerStyle,children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n            /* For Chrome, Edge, Safari */\\n            div[style*=\\\"overflow-x: auto\\\"]::-webkit-scrollbar {\\n              height: 14px;\\n            }\\n            div[style*=\\\"overflow-x: auto\\\"]::-webkit-scrollbar-thumb {\\n              background: #bfc9d1;\\n              border-radius: 8px;\\n            }\\n            div[style*=\\\"overflow-x: auto\\\"]::-webkit-scrollbar-track {\\n              background: #f7f8fa;\\n            }\\n          \"}),bookings.length===0?/*#__PURE__*/_jsx(\"p\",{style:{padding:'20px',textAlign:'center'},children:\"No bookings found.\"}):/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',background:'#fff',border:'1px solid #e3e7ee'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#f5f5f5'},children:[/*#__PURE__*/_jsx(\"th\",{style:cell,children:\"Room\"}),/*#__PURE__*/_jsx(\"th\",{style:cell,children:\"Booked By\"}),/*#__PURE__*/_jsx(\"th\",{style:cell,children:\"Start\"}),/*#__PURE__*/_jsx(\"th\",{style:cell,children:\"End\"}),/*#__PURE__*/_jsx(\"th\",{style:cell,children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bookings.map(booking=>{var _booking$room,_booking$bookedBy,_booking$bookedBy2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:cell,children:((_booking$room=booking.room)===null||_booking$room===void 0?void 0:_booking$room.name)||'Room'}),/*#__PURE__*/_jsx(\"td\",{style:cell,children:(_booking$bookedBy=booking.bookedBy)!==null&&_booking$bookedBy!==void 0&&_booking$bookedBy.name?\"\".concat(booking.bookedBy.name,\" (\").concat(booking.bookedBy.email,\")\"):((_booking$bookedBy2=booking.bookedBy)===null||_booking$bookedBy2===void 0?void 0:_booking$bookedBy2.email)||'Unknown'}),/*#__PURE__*/_jsx(\"td\",{style:cell,children:formatDateTime(booking.startTime)}),/*#__PURE__*/_jsx(\"td\",{style:cell,children:formatDateTime(booking.endTime)}),/*#__PURE__*/_jsx(\"td\",{style:cell,children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancel(booking._id),style:{padding:'7px 18px',background:'#d32f2f',color:'#fff',border:'none',borderRadius:'5px',fontWeight:600,cursor:'pointer'},children:\"Cancel\"})})]},booking._id);})})]})]})]});};const cell={border:'1px solid #e3e7ee',padding:'14px',textAlign:'center',fontSize:'1rem'};export default ViewAllBookings;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","ViewAllBookings","bookings","setBookings","token","localStorage","getItem","fetchBookings","res","get","headers","Authorization","concat","data","err","console","error","handleCancel","bookingId","window","confirm","delete","_err$response","_err$response$data","alert","response","message","formatDateTime","dateStr","d","Date","toLocaleDateString","toLocaleTimeString","hour","minute","second","contentContainerStyle","padding","maxWidth","margin","background","minHeight","boxSizing","tableContainerStyle","borderRadius","boxShadow","marginTop","border","overflowX","scrollbarWidth","style","children","marginBottom","fontSize","display","alignItems","gap","color","fontWeight","role","length","textAlign","width","borderCollapse","cell","map","booking","_booking$room","_booking$bookedBy","_booking$bookedBy2","room","name","bookedBy","email","startTime","endTime","onClick","_id","cursor"],"sources":["C:/Users/ADMIN/Desktop/hyd/hyd/frontend/src/superadmin/components/ViewAllBookings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ViewAllBookings = () => {\r\n  const [bookings, setBookings] = useState([]);\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    fetchBookings();\r\n    // eslint-disable-next-line\r\n  }, [token]);\r\n\r\n  const fetchBookings = async () => {\r\n    try {\r\n      const res = await axios.get('http://localhost:5000/api/bookings', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setBookings(res.data);\r\n    } catch (err) {\r\n      console.error('Error loading bookings:', err);\r\n    }\r\n  };\r\n\r\n  const handleCancel = async (bookingId) => {\r\n    if (!window.confirm('Are you sure you want to cancel this booking?')) return;\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/bookings/${bookingId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      fetchBookings();\r\n    } catch (err) {\r\n      alert(err.response?.data?.message || 'Failed to cancel booking');\r\n    }\r\n  };\r\n\r\n  const formatDateTime = (dateStr) => {\r\n    const d = new Date(dateStr);\r\n    return d.toLocaleDateString('en-GB') + ', ' + d.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit', second: '2-digit' });\r\n  };\r\n\r\n  // consistent with ManageRooms\r\n  const contentContainerStyle = {\r\n    padding: '40px',\r\n    maxWidth: '1200px',\r\n    margin: '40px auto',\r\n    background: '#f7f8fa',\r\n    minHeight: '100vh',\r\n    boxSizing: 'border-box'\r\n  };\r\n\r\n  const tableContainerStyle = {\r\n    background: '#fff',\r\n    borderRadius: '18px',\r\n    boxShadow: '0 4px 24px rgba(0,0,0,0.10)',\r\n    padding: '0',\r\n    marginTop: '30px',\r\n    minHeight: 'unset',\r\n    boxSizing: 'border-box',\r\n    border: '1px solid #e3e7ee',\r\n    overflowX: 'auto',\r\n    scrollbarWidth: 'medium' // Firefox\r\n  };\r\n\r\n  return (\r\n    <div style={contentContainerStyle}>\r\n      <h2 style={{\r\n        marginBottom: '25px',\r\n        fontSize: '2.2rem',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '10px',\r\n        color: '#1976d2',\r\n        fontWeight: 700\r\n      }}>\r\n        <span role=\"img\" aria-label=\"bookings\">üóíÔ∏è</span> All Bookings\r\n      </h2>\r\n\r\n      <div style={tableContainerStyle}>\r\n        <style>\r\n          {`\r\n            /* For Chrome, Edge, Safari */\r\n            div[style*=\"overflow-x: auto\"]::-webkit-scrollbar {\r\n              height: 14px;\r\n            }\r\n            div[style*=\"overflow-x: auto\"]::-webkit-scrollbar-thumb {\r\n              background: #bfc9d1;\r\n              border-radius: 8px;\r\n            }\r\n            div[style*=\"overflow-x: auto\"]::-webkit-scrollbar-track {\r\n              background: #f7f8fa;\r\n            }\r\n          `}\r\n        </style>\r\n        {bookings.length === 0 ? (\r\n          <p style={{ padding: '20px', textAlign: 'center' }}>No bookings found.</p>\r\n        ) : (\r\n          <table style={{\r\n            width: '100%',\r\n            borderCollapse: 'collapse',\r\n            background: '#fff',\r\n            border: '1px solid #e3e7ee'\r\n          }}>\r\n            <thead>\r\n              <tr style={{ background: '#f5f5f5' }}>\r\n                <th style={cell}>Room</th>\r\n                <th style={cell}>Booked By</th>\r\n                <th style={cell}>Start</th>\r\n                <th style={cell}>End</th>\r\n                <th style={cell}>Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {bookings.map((booking) => (\r\n                <tr key={booking._id}>\r\n                  <td style={cell}>{booking.room?.name || 'Room'}</td>\r\n                  <td style={cell}>\r\n                    {booking.bookedBy?.name\r\n                      ? `${booking.bookedBy.name} (${booking.bookedBy.email})`\r\n                      : booking.bookedBy?.email || 'Unknown'}\r\n                  </td>\r\n                  <td style={cell}>{formatDateTime(booking.startTime)}</td>\r\n                  <td style={cell}>{formatDateTime(booking.endTime)}</td>\r\n                  <td style={cell}>\r\n                    <button\r\n                      onClick={() => handleCancel(booking._id)}\r\n                      style={{\r\n                        padding: '7px 18px',\r\n                        background: '#d32f2f',\r\n                        color: '#fff',\r\n                        border: 'none',\r\n                        borderRadius: '5px',\r\n                        fontWeight: 600,\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst cell = {\r\n  border: '1px solid #e3e7ee',\r\n  padding: '14px',\r\n  textAlign: 'center',\r\n  fontSize: '1rem'\r\n};\r\n\r\nexport default ViewAllBookings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}